<!-- Large desktop banner. Must be used with "Large banner limit and switch" mixin -->

 <!-- CREATED AT: 2019-09-22T13:15:47+00:00 -->

<style>
/* Hide when editing */
.action-edit #centralNotice,
.ve-activated #centralNotice {
    display: none !important;
}

/* Fix fixed position z-index for de.wikipedia */
.mw-body { z-index: auto; }
#siteNotice { z-index: 2; }

/* Border-Box */

.frb,
.frb *,
.frb *:before,
.frb *:after {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
}

/* Banner wide settings */

.frb input,
.frb button {
    font-size: inherit;
    font-family: inherit;
}

.frb button {
    cursor: pointer;
    border: 0;
    background: transparent;
    padding: 0;
}

/* --- Main banner wrapper --- */

#siteNotice {
    z-index: 2;
}

.frb {
    display: none;
    background-color: #fff;
    color: #000;
    font-size: 16px;
    line-height: 1.1875; /*19px @16px*/
    font-family: system-ui, -apple-system,BlinkMacSystemFont, "Segoe UI", Roboto, "Oxygen-Sans", Ubuntu, Cantarell, Lato, "Helvetica Neue", Helvetica, Arial, sans-serif;
    text-align: left;
    font-weight: normal;
    font-style: normal; /* needed for uk.wikipedia */

    position: fixed;
    bottom: 16px;
}

.frb-in-article {
    position: relative;
    top: 0;
    width: calc(100% + 12px);
    margin-bottom: 20px;
}

.frb-nag,
.frb-fixed {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    padding: 16px;
    background-color: #fff;
    border-bottom: 1px solid #c8ccd1;
    box-shadow: 0 1px 1px rgba(0,0,0,0.1);
}

.frb-layout {
    position: relative;
    display: table;
    width: 100%;
    padding: 0;
}

/* --- Icon buttons --- */

.frb .frb-icon-btn {
    display: block;
    cursor: pointer;
    background-repeat: no-repeat;
    background-position: center;
    opacity: .55;
}
.frb .frb-icon-btn:hover {
    opacity: 1;
}

.frb .frb-close {
    position: absolute;
    top: 0;
    right: 0;
    width: 18px;
    height: 18px;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 10 10' xmlns='http://www.w3.org/2000/svg'%3E%3Cg stroke='%23000' fill='none' stroke-linecap='round'%3E%3Cpath d='M1 1 l8 8 M9 1 l-8 8'%3E%3C/path%3E%3C/g%3E%3C/svg%3E");
    background-size: 12px 12px;
}
body.rtl .frb .frb-close {
    right: auto;
    left: 0;
}

.frb .frb-back {
    position: absolute;
    top: 0;
    left: 0;
    width: 20px;
    height: 18px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 16'%3E%3Cg fill='none' fill-rule='evenodd' transform='translate(1 1)'%3E%3Cpath stroke='%23000' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.778' d='M7.181 13.285L.753 7 7.181.715'%3E%3C/path%3E%3Crect fill='%23000' width='18.182' height='1.778' x='.818' y='6.111' rx='.889'%3E%3C/rect%3E%3C/g%3E%3C/svg%3E");
    background-size: 20px 13px;
}

/* --- RML Close button --- */

.close-rml {
    display: none;
}
.frb-nag .close-rml {
    text-align: center;
    margin: 0 auto;
    padding: 2px;
    font-size: 11px;
    line-height: 1;
    text-transform: uppercase;
    cursor: pointer;
    color: #54595d;
}
.frb-nag .close-rml:hover {
    color: #000;
}

.frb-rml-displayed .close-rml {
    display: block;
}

/* -------------- Message -------------- */

.frb-message {
    display: table-cell;
    width: auto;
    vertical-align: top;
    font-weight: normal;
    color: #000;
    font-size: 15px;
    line-height: 1.6; /*24px @15px*/
}

.frb-message-inner {
    position: relative;
    z-index: 1;
    background-color: #f8f9fa;
    border: 6px solid #900;
    padding: 12px 18px 14px;
}

@media all and (min-width: 1100px) {
    .frb-message-inner {
        padding: 15px 26px 19px;
    }
}

@media (min-width: 1100px) {
    .frb-message {
        font-size: 18px;
    }
    html[lang="en"] .frb-message { font-size: 19px; }
}

@media (min-width: 1300px) {
    .frb-message { font-size: 20px; }
    html[lang="en"] .frb-message { font-size: 21px; }
}

@media (min-width: 1500px) {
    .frb-message { font-size: 21px; }
    html[lang="en"] .frb-message { font-size: 22px; }
}

@media (min-width: 1700px) {
    .frb-message { font-size: 22px; }
    html[lang="en"] .frb-message { font-size: 23px; }
}

.frb-message-icon {
    float: left;
    margin-top: 4px; /*in px since margin is consistent on all bp*/
    margin-right: 2px;
    height: 1em;
    width: 1em;
}

.frb-nag .frb-message-icon {
    margin-top: 3px;
}

@media all and (min-width: 1300px) {
    .frb-nag .frb-message-icon {
        margin-top: 4px;
    }
}

body.rtl .frb-message-icon {
  float: right;
  margin-left: 2px;
}

.frb-message p {
    margin: 0;
}

.frb-greeting {
    display: block;
    margin-bottom: 0.5em;
}

.frb-highlight {
    border-bottom: 3px solid #900;
    padding-bottom: 2px;
}

/* Nag styles */

.frb-nag {
    cursor: pointer;
}

.frb-nag .frb-message {
    vertical-align: middle;
}

.frb-nag .frb-message-inner {
    padding: 12px 18px;
    font-size: 14px;
}

@media (min-width: 1100px) {
    .frb-nag .frb-message-inner {
        font-size: 16px;
    }
}

@media (min-width: 1400px) {
    .frb-nag .frb-message-inner {
        padding: 16px 26px;
        font-size: inherit;
    }
}

.frb-nag .frb-form-wrapper {
    padding: 0 16px;
    width: 360px;
    overflow: visible;
    vertical-align: middle;
}

@media all and (min-width: 1200px) {
    .frb-nag .frb-form-wrapper {
        width: 440px;
    }
}

/*Triangle*/
.frb-nag .frb-message-inner:before {
    position: absolute;
    top: 50%;
    right: -26px;
    content: " ";
    margin: -10px 0 0 0;
    border: 10px solid transparent;
    border-left-color: #900;
    pointer-events: none;
}

/* -------------- Form -------------- */

.frb-form-wrapper {
    vertical-align: top;
    display: table-cell;
    position: relative;
    width: 320px;
    height: 100%;
    vertical-align: top;
    background: #fff;
}

/*Triangle in article and fixed expanded state*/

.frb-triangle:before {
    content: " ";
    position: absolute;
    top: 50%;
    left: -25px;
    margin-top: -13px;
    content: " ";
    border: 10px solid transparent;
    border-left-color: #900;
    pointer-events: none;
}

.frb-form-wrapper fieldset {
    border: 0;
    margin: 0 auto;
    padding: 0 0 6px 0;
}

.frb-form-wrapper .frb-amounts {
    padding: 0;
    margin-top: 8px;
}

.frb-form-wrapper legend,
.frb-rml-form-legend {
    display: block;
    margin: 0 0 2px;
    padding: 0 4px;
    font-weight: normal;
    text-align: left;
    font-size: 14px;
    line-height: 1.2142857143; /*17px @14px*/
    color: #54595d;
    transition: all .25s ease-in-out;
}

.frb-form-wrapper {
    counter-reset: count;
}
.frb-numbered {
    counter-increment: count;
}
.frb-numbered::before {
    content: counter(count) ". ";
}

.frb-rml-form-legend {
    padding: 0 0 2px;
}

.frb-frequency legend,
.frb-amounts legend {
    padding: 0 5px;
}

.frb-form-wrapper fieldset:first-of-type legend {
    padding-top: 0;
}

.frb-form-wrapper ul {
    display: table;
    table-layout: fixed;
    width: 100%;
    margin: 0;
    padding: 0;
    list-style: none;
}

.frb-form-wrapper li {
    display: table-cell;
    vertical-align: top;
}

.frb-form-wrapper .frb-methods li {
    padding: 4px !important;
}

#frb-form {
    padding-left: 25px;
    position: relative;
    overflow: hidden;
}

/* --- Common Button Styles --- */

/* Hide radio buttons */
.frb-form-wrapper .frb-methods input[type="radio"],
.frb-form-wrapper .frb-optin input[type="radio"],
.frb-form-wrapper input[type="checkbox"] {
    position: absolute;
    overflow: hidden;
    height: 1px;
    width: 1px;
    clip: rect(0 0 0 0);
    border: 0;
    margin: -1px;
    padding: 0;
}

.frb-btn {
    width: 100%;
    height: 48px;
    display: block;
    background-color: #f8f9fa;
    color: #000;
    font-size: 16px;
    line-height: 1.25; /*20px @16px*/
    padding: 13px 4px 15px 4px;
    border: 1px solid #9aa0a7;
    border-radius: 2px;
    outline: 0;
    text-align: center;
    cursor: pointer;
    font-family: inherit;
    font-weight: 500;
    -webkit-transition: all .25s ease-in-out;
    -moz-transition:    all .25s ease-in-out;
    transition:         all .25s ease-in-out;
}
.frb-btn:hover {
    background-color: #fff;
    color: #444;
    border-color: #a2a9b1;
}
.frb-btn:active {
    background-color: #d9d9d9;
    color: #000;
    border-color: #7d8389;
}
.frb-form-wrapper input[type=radio]:checked + .frb-btn {
    background-color: #2a4b8d;
    color: #fff;
    border-color: #7d8389;
}

.frb-rml-link {
    display: block;
    font-size: 16px;
    line-height: 1.125; /*18px @16px*/
    color: #36c;
    margin: 16px auto 0;
    text-align: center;
    font-weight: bold;
}

.frb-rml-link:hover,
.frb-rml-link:focus {
    color: #447ff5;
}

.frb-radio,
.frb-radio-label {
    font-size: 16px;
    line-height: 1.375; /*22px @16px*/
}

.frb-radio {
    cursor: pointer;
    float: left;
    height: 14px;
    margin: 7px 5px 0px 7px;
}

body.rtl .frb-radio {
    float: right;
}

.frb-radio-label {
    display: block;
    padding: 3px 2px;
    cursor: pointer;
    white-space: nowrap;
    font-weight: bold;
}

body.rtl .frb-radio-label {
    text-align: right;
}

@media all and (min-width: 1900px) {
    .frb-radio-label {
        padding: 2px;
    }
}

.frb-frequency .frb-radio-label {
    font-size: 16px;
    line-height: 1.375; /*22px @16px*/
}

/* Focus styles */

/*Outline reset*/
.frb-form-wrapper input[type=radio]:focus,
.frb-radio:focus + .frb-radio-label,
#frb-amt-other-input:focus,
#frb-rml-email:focus {
    outline: 0;
}

.frb button:focus,
.frb-btn:focus,
.frb-icon-btn:focus,
.frb-btn-submit:focus,
.frb-form-wrapper input[type=radio]:focus + .frb-btn,
.frb-form-wrapper input[type=radio]:focus + #frb-amt-other-label,
#frb-amt-other-input:focus,
.frb-rml-displayed .frb-rml-form input:focus,
.frb-nag-btn:focus,
#nag-rml-btn:focus {
    outline: 0;
    border-color: #36c !important;
    box-shadow: inset 0 0 0 2px #36c;
}

.frb button.frb-submit:focus {
    box-shadow: inset 0 0 0 1px #447ff5, inset 0 0 0 2px #fff;
}

.frb-rml-displayed .frb-rml-form input:focus,
.frb-rml-displayed .frb-rml-form .frb-btn-submit:focus {
    position: relative;
}

.frb-radio:focus + .frb-radio-label,
.frb-radio:hover + .frb-radio-label {
    color: #36c;
    text-decoration: underline;
}

#frb-amt-other-input:focus,
#frb-amt-other-input:hover {
    border-color: #36c !important;
    box-shadow: none;
    color: #36c;
}

.frb-form-wrapper input[type=radio]:focus + .frb-btn,
.frb-form-wrapper input[type=radio]:focus + #frb-amt-other-label,
.frb-form-wrapper input[type=radio]:checked + .frb-btn:focus,
.frb-form-wrapper input[type=radio]:checked + #frb-amt-other-label:focus,
.frb-form-wrapper .frb-btn-submit:focus,
#nag-yes-btn:focus {
    box-shadow: inset 0 0 0 1px #36c, inset 0 0 0 2px #fff;
}

.frb-btn img {
    padding: 0 4px;
    max-width: 100%;
    max-height: 20px; /*must equal font line height of frb-btn*/
}

.frb-methods .frb-btn {
    height: 64px;
    line-height: 1.125; /*18px @16px*/
}

.frb-methods svg {
    max-width: 100%;
    width: 64px;
}

/*Slight adaption for Paypal logo with USD string*/
.frb-methods .frb-logo-payments--paypal-usd {
    width: 85px;
    margin-bottom: -6px;
}

/* Credit card logos */

/* Countries with 4 card types */
.frb-cc-logo-wrapper {
    display: block;
    margin: 0 auto;
    max-width: 89px;
}

.frb-pm-cc svg {
    width: 26px;
    max-height: 15px; /*height needed for IE11*/
    margin: 2px;
    display: none;
}

/* Countries with 3 card types */
.frb-cctypes-vma .frb-cc-logo-wrapper {
    width: 100%;
}
.frb-cctypes-vma svg  {
    width: 28%;
    max-height: 34px;
}

.frb-cc-logo-wrapper {
    display: none;
    font-size: 0; /* Remove spacing between icons */
}

.frb-cctypes-vmad .frb-cc-logo-wrapper,
.frb-cctypes-vmaj .frb-cc-logo-wrapper,
.frb-cctypes-vma  .frb-cc-logo-wrapper,
.frb-cctypes-vm   .frb-cc-logo-wrapper {
    display: block;
}

.frb-cctypes-vmad .frb-pm-cc-label,
.frb-cctypes-vmaj .frb-pm-cc-label,
.frb-cctypes-vma  .frb-pm-cc-label,
.frb-cctypes-vm   .frb-pm-cc-label {
    display: none;
}

.frb-cctypes-vmad .frb-cc-logo-visa,
.frb-cctypes-vmad .frb-cc-logo-mastercard,
.frb-cctypes-vmad .frb-cc-logo-amex,
.frb-cctypes-vmad .frb-cc-logo-discover,

.frb-cctypes-vmaj .frb-cc-logo-visa,
.frb-cctypes-vmaj .frb-cc-logo-mastercard,
.frb-cctypes-vmaj .frb-cc-logo-amex,
.frb-cctypes-vmaj .frb-cc-logo-jcb,

.frb-cctypes-vma  .frb-cc-logo-visa,
.frb-cctypes-vma  .frb-cc-logo-mastercard,
.frb-cctypes-vma  .frb-cc-logo-amex,

.frb-cctypes-vm   .frb-cc-logo-visa,
.frb-cctypes-vm   .frb-cc-logo-mastercard {
    display: inline-block;
}

/* Blue text buttons */
.frb-btn.frb-btn-btxt {
    color: #36c;
}
.frb-btn.frb-btn-btxt:active {
    color: #2a4b8d;
}

/* Submit/Continue buttons (blue background) */
.frb .frb-btn-submit {
    width: 100%;
    display: block;
    margin-top: 6px;
    padding: 8px;
    color: #fff;
    background-color: #36c;
    border-color: #36c;
    cursor: pointer;
    border: 0;
    border-radius: 2px;
    font-size: 16px;
    font-weight: bold;
    -webkit-transition: all .25s ease-in-out;
    -moz-transition:    all .25s ease-in-out;
    transition:         all .25s ease-in-out;
}
.frb .frb-btn-submit:hover {
    background-color: #447ff5;
    border-color: #447ff5;
}
.frb .frb-btn-submit:active {
    background-color: #2a4b8d;
    border-color: #2a4b8d;
    box-shadow: none;
}

/* --- Other Amount --- */

#frb-amt-other-input::-webkit-input-placeholder {
    color: #000;
}
#frb-amt-other-input::-moz-placeholder {
    opacity: 1;
    color: #000;
}
#frb-amt-other-input:-ms-input-placeholder {
    color: #000;
}
#frb-amt-other-input:-moz-placeholder {
    opacity: 1;
    color: #000;
}

#frb-amt-other-input:focus::-webkit-input-placeholder {
    color: #666;
}
#frb-amt-other-input:focus::-moz-placeholder {
    opacity: 1;
    color: #666;
}
#frb-amt-other-input:focus:-ms-input-placeholder {
    color: #666;
}
#frb-amt-other-input:focus:-moz-placeholder {
    opacity: 1;
    color: #666;
}

#frb-amt-other-input:hover::-webkit-input-placeholder {
    color: #36c;
}
#frb-amt-other-input:hover::-moz-placeholder {
    opacity: 1;
    color: #36c;
}
#frb-amt-other-input:hover:-ms-input-placeholder {
    color: #36c;
}
#frb-amt-other-input:hover:-moz-placeholder {
    opacity: 1;
    color: #36c;
}

.frb-amt-other-label {
    display: none;
}

.frb-amt-other {
    width: 66.666666%;
}

#frb-amt-other-input {
    width: calc(100% - 33px);
    border: none;
    border-bottom: 1px solid #000;
    color: #000;
    font-size: 16px;
    font-weight: normal;
    padding: 5px 2px 7px 0;
    border-radius: 0;
    direction: ltr;
    text-align: left;
    font-family: inherit;
    font-weight: bold;
}

@media all and (min-width: 1280px) {
    .frb-amt-other #frb-amt-other-input {
        margin: 0;
    }
}

body.rtl #frb-amt-other-input {
    text-align: right;
}

/* --- Transaction fees options --- */

/*Checkbox styles*/
.frb-checkbox {
    cursor: pointer;
    float: left;
    width: 16px;
    height: 16px;
    padding: 0;
    margin: 13px 4px 0 6px;
    display: inline-block;
}

.frb-checkbox-label::before {
    left: 0;
    display: inline-block;
    content: "";
    height: 17px;
    width: 17px;
    border-radius: 2px;
    border: 1px solid #a2a9b1;
    background-color: #f8f9fa;
}

.frb-checkbox-label::after {
    content: "";
    top: 8px;
    left: 4px;
    display: inline-block;
    height: 5px;
    width: 9px;
    border-left: 2px solid;
    border-bottom: 2px solid;
    transform: rotate(-45deg);
    border-color: #fff;
}

.frb-checkbox-label {
    position: relative;
    display: inline-block;
    margin: 13px 0 0 5px;
    width: calc(100% - 10px);
    padding-left: 26px;
    padding-top: 2px;
    cursor: pointer;
    font-size: 14px;
    line-height: 1.3571428571; /*19px @14px*/
    color: #000;
}

.frb-checkbox-label::before,
.frb-checkbox-label::after {
    position: absolute;
}
/*Outer-box*/
.frb-checkbox-label::before {
    top: 3px;
}
/*Checkmark*/
.frb-checkbox-label::after {
    left: 4px;
    top: 8px;
}

body.rtl .frb-checkbox {
    float: right;
}

.frb-ptf-total {
    font-weight: bold;
}

/*Hide the checkmark by default*/
.frb-checkbox + .frb-checkbox-label::after {
    content: none;
}
/*Unhide the checkmark on the checked state*/
.frb-checkbox:checked + .frb-checkbox-label::after {
    content: "";
}

.frb-checkbox:checked + .frb-checkbox-label:before {
    background-color: #36c;
    border-color: #36c;
}

/*Focus styles*/
/*Unchecked*/
.frb-checkbox:focus + .frb-checkbox-label::before {
    border-color: #36c;
    box-shadow: inset 0 0 0 1px #36c;
}

/*Checked*/
.frb-checkbox:focus:checked + .frb-checkbox-label::before {
    box-shadow: inset 0 0 0 1px #36c, inset 0 0 0 2px #fff;
}

/*Hover*/
.frb-checkbox:hover + .frb-checkbox-label::before {
    background-color: #eaecf0;
}

.frb-checkbox:checked:hover + .frb-checkbox-label:before {
    background-color: #447ff5;
    border-color: #447ff5;
}

/* --- Email opt-in --- */

.frb-form-wrapper .frb-optin {
    margin-bottom: 3px;
}

.frb-form-wrapper .frb-optin legend {
    margin-bottom: 8px;
    display: inline-block;
}

/* .frb-form-wrapper .frb-optin li {
    display: block;
    clear: both;
} */

.frb-optin .frb-radio {
    margin: 6px 5px 0px 9px;
}

.frb-optin .frb-radio-label {
    float: right;
    width: calc(100% - 30px);
    white-space: normal;
    font-size: 14px;
    line-height: 1.3571428571; /*19px @14px*/
    font-weight: bold;
}

.frb-optin .frb-radio-label:hover,
.frb-optin .frb-radio:hover + .frb-radio-label {
    text-decoration: none;
}

.frb-optin-prompt {
    display: none;
    margin: 8px;
    padding: 4px 8px;
    border: 2px solid #900;
    border-radius: 2px;
    font-size: 14px;
    line-height: 1.2857142857; /*18px @14px*/
    font-weight: normal;
}

.frb-optin-prompt.is-positive {
    border-color: #14866d;
    font-weight: bold;
}

.frb-optin-prompt__yes {
    display: none;
}

.frb-optin-prompt__no {
    display: block;
}

.frb-optin-prompt.is-positive .frb-optin-prompt__yes {
    display: block;
}

.frb-optin-prompt.is-positive .frb-optin-prompt__no {
    display: none;
}

.frb-optin-smallprint {
    padding: 8px 8px 0 8px;
}

/* --- Payment method Buttons --- */

/* Hide methods which aren't monthly capable when monthly option is selected */
.form-monthly .no-monthly {
    opacity: 0.4 !important;
}

.form-monthly .no-monthly .frb-label {
    cursor: default;
}

.frb-form-wrapper .frb-methods {
    margin-top: 12px;
    padding-bottom: 0;
}

@media all and (min-width: 1100px) {
    .frb-form-wrapper .frb-methods {
        margin-top: 15px;
    }
}

@media all and (min-width: 1700px) {
    .frb-form-wrapper .frb-methods {
        margin-top: 8px;
    }
}

/* Only where there are 4 methods, display 2x2 */
.frb-methods ul li:first-child:nth-last-child(4),
.frb-methods ul li:first-child:nth-last-child(4) ~ li {
    float: left;
    width: 50%;
}
.frb-methods ul li:first-child:nth-last-child(4) .frb-btn,
.frb-methods ul li:first-child:nth-last-child(4) ~ li .frb-btn {
    height: 48px;
    padding: 13px 4px 15px 4px;
}

/* --- Footer / Small Print --- */
.frb-smallprint {
    font-size: 12px;
    line-height: 1.5; /*18px @12px*/
    color: #54595d;
    font-weight: normal;
}
.frb-smallprint a {
    color: #54595d;
    text-decoration: underline;
}
.frb-smallprint a:hover {
    color: #000;
}

.frb-footer {
    padding-top: 8px;
}

/* --- Show and Hiding (Minimize and Maximize) --- */

.frb-nag-btns {
    display: flex;
}

.frb.frb-rml-displayed .frb-nag-btns {
    display: none;
}

button.frb-nag-btn {
    flex: 1 0 0;
    margin: 0 8px;
    padding: 6px;
    min-height: 48px;
    background-color: white;
    border: 1px solid #9aa0a7;
    border-radius: 2px;
    outline: 0;
    color: #000;
    cursor: pointer;
    font-weight: normal;
    font-size: 13px;
    line-height: 1.3;
    transition: all 100ms;
}

@media all and (min-width: 1100px) {
    button.frb-nag-btn {
        font-size: 14px;
    }
}

@media all and (min-width: 1200px) {
    button.frb-nag-btn {
        font-size: 16px;
    }
}

button.frb-nag-btn:hover {
    -moz-transform: scale(1.043478);
    -ms-transform: scale(1.043478);
    -webkit-transform: scale(1.043478);
    transform: scale(1.043478);
}

#nag-yes-btn {
    font-weight: bold;
    background-color: #36c;
    border: 1px solid #36c;
    color: white;
}

/* --- Maybe later --- */

.frb-rml-disabled .frb-rml,
.frb-rml-disabled .frb-rml-link,
.frb-rml-disabled #nag-rml-btn {
    display: none;
}

.frb-rml-form {
    display: none;
    position: absolute;
    margin-top: 12px;
    margin-left: 12px;
    width: calc(100% - 12px);
    padding: 16px;
    text-align: left;
    background: #fff;
    border: 1px solid #c8ccd1;
    border-radius: 2px;
    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.15);
    z-index: 10;
}

.frb-rml-form:after,
.frb-rml-form:before {
    bottom: 100%;
    left: 50%;
    border: solid transparent;
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
}

.frb-rml-form:after {
    border-bottom-color: #fff;
    border-width: 10px;
    margin-left: -10px;
}

.frb-rml-form:before {
    border-bottom-color: #c8ccd1;
    border-width: 11px;
    margin-left: -11px;
}

.frb-rml-form input {
    width: 100%;
    padding: 6px 8px 7px;
    border: 1px solid #a2a9b1;
    border-radius: 2px;
    color: #000;
    font-size: 14px;
}

#frb-rml-email.frb-haserror {
    border-color: #d33 !important;
    box-shadow: inset 0 0 0 1px #d33 !important;
}

.frb-error-invalidemail {
    margin: 2px 0 0 !important;
}

.frb-rml-ty {
    text-align: center;
    margin: 16px 16px 0 25px;
}

.frb-rml-displayed .frb-rml-form {
    position: relative;
    z-index: 10;
    display: table !important;
    margin: -4px auto 0;
    padding: 0 12px;
    width: 100%;
    max-width: 340px;
    background: transparent;
    border: none;
    box-shadow: 0 0 0 0 rgba(0, 0, 0, 0);
}

.frb-rml-displayed .frb-rml-form:after,
.frb-rml-displayed .frb-rml-form:before {
    display: none !important;
}

.frb-rml-displayed .frb-rml {
    display: block !important;
    margin-top: 0;
}

.frb-rml-displayed .frb-rml-form legend {
   font-size: 12px;
   line-height: 1; /*12px @12px*/
   padding-bottom: 4px;
}

@media all and (min-width: 1200px) {
    .frb-rml-displayed .frb-rml-form legend {
       font-size: 14px;
       line-height: 1.2142857143; /*17px @14px*/
    }
}

.frb-rml-displayed .frb-rml-form input {
    display: inline;
    vertical-align: middle;
    width: 200px;
    height: 32px;
    padding: 7px 8px;
    margin: 0;
    border: 1px solid #a2a9b1;
    border-radius: 2px;
    color: #000;
    direction: ltr;
    line-height: 1;
}

.frb-rml-displayed .frb-rml-form .frb-btn-submit {
    display: inline;
    vertical-align: middle;
    width: auto;
    height: 32px;
    margin-top: 0;
    margin-left: 2px;
    line-height: 1;
    padding: 9px 14px;
    font-size: 14px;
    border-radius: 2px;
}

.frb-prevent-page-jump {
    display: none;
}

/* -- Submit/"Donate now" button -- */

.frb .frb-submit {
    height: 52px;
    display: inline-block;
    cursor: default;
    margin: 4px 5px 0;
    padding: 3px 6px 5px;
    width: calc(100% - 9px);
    background-color: #f8f9fa;
    border: 1px solid #a2a9b1;
    border-radius: 2px;
    color: #36c;
    font-weight: bold;
    transition: background-color 0.5s ease;
    opacity: .5;
}

.frb .frb-submit.active {
    background-color: #36c;
    border-color: #36c;
    color: #fff;
    cursor: pointer;
    opacity: 1;
}

.frb .frb-submit.active:hover {
    background-color: #447ff5;
    border-color: #447ff5;
}

.frb-submit-amount {
    display: none;
}
.frb-submit-label-monthly {
    display: none;
}
.frb-submit-label-now {
    display: inline;
}
.form-monthly .frb-submit-label-monthly {
    display: inline;
}
.form-monthly .frb-submit-label-now {
    display: none;
}
.frb-icon-lock {
    fill: #fff;
    width: 14px;
    height: 14px;
}

.frb-payment-options {
    display: table;
    table-layout: fixed;
    width: 100%;
}

.frb-payment-options .frb-button {
    width: 100%;
}

/* For 4 payment options, 2 rows of 2 */
.frb-payment-options .frb-button:first-child:nth-last-child(4),
.frb-payment-options .frb-button:first-child:nth-last-child(4) ~ .frb-button {
    float: left;
    width: 50%;
}

.frb-methods .frb-button,
.frb-optin .frb-button {
    display: table-cell;
    padding: 5px;
    float: none;
    vertical-align: top;
}

.frb-button-table {
    display: table;
    width: 100%;
}

.frb-label {
    display: table-cell; /* To vertical align content */
    vertical-align: middle;
    width: 100%;
    height: 52px;
    color: #36c;
    background-color: #f8f9fa;
    border-radius: 2px;
    border: 1px solid #a2a9b1;
    text-align: center;
    transition: background-color 0.5s ease;
    cursor: pointer;
    transition: all 0.5s ease;
    padding: 0 10px;
}

.frb-label:hover,
.frb-rml-email:hover {
    background-color: #eaf3ff;
}

.form-monthly .no-monthly .frb-label:hover {
    background-color: #f8f9fa;
}

.frb-radio:checked + .frb-label {
    background-color: #2a4b8d;
    border-color: #2a4b8d;
    color: #fff;
    font-weight: bold;
}

.frb-radio:focus + .frb-label,
#frb-rml-email:focus {
    box-shadow: inset 0 0 0 1px #36c;
    border-color: #36c;
}

.frb-radio:focus:checked + .frb-label {
    box-shadow: inset 0 0 0 1px #2a4b8d, inset 0 0 0 2px #fff;
}

.frb-radio:checked + .frb-label .frb-logo-payments--paypal path,
.frb-radio:checked + .frb-label .frb-logo-payments--paypal-usd path,
.frb-radio:checked + .frb-label .frb-logo-payments--amazon path {
    fill: #fff;
}

/* Error messages */
.frb-error {
    display: none;
    margin: 5px 0 5px 5px;
    font-size: 14px;
    font-weight: 500;
    line-height: 1.3;
    color: #d33;
}

.frb-form-wrapper fieldset.frb-haserror .error-highlight {
    color: #d33;
    font-weight: bold;
}

/* STEP 2 UPSELL*/

.frb-upsell,
.frb-step-monthly-diff-amt .frb-amt-monthly {
    width: calc(100% + 8px) !important;
    transition: background-color 0.5s ease;
    padding: 10px 4px;
    text-align: center;
}

.frb-step-monthly-diff-amt .frb-amt-monthly {
    display: block;
    padding: 0 4px 10px 4px;
}

.frb-upsell-cta,
.frb-upsell-ty {
    font-size: 17px;
    line-height: 1.3;
    font-weight: bold;
    text-align: center;
}

.frb-upsell-color,
.frb-step-monthly-diff-amt .frb-amt-monthly label {
    display: block;
    font-size: 15px;
    line-height: 1.3;
    font-weight: normal;
    padding: 0 5%;
    margin: .5em 0;
}

.frb .frb-monthly-diff-amt-link {
    font-size: 15px;
    line-height: 1.3;
    color: #36c;
    margin: 8px 2px;
    padding: 12px 10%;
    text-align: center;
    cursor: pointer;
    font-weight: bold;
}

#frb-amt-monthly-other-input {
    position: relative;
    text-align: center;
    font-size: 18px;
}

/* steps */
#frb-form .frb-step {
    position: absolute;
    top: 0;
    width: 280px;
    padding-top: 24px;
    margin-left: 320px;
    visibility: hidden; /* Prevent tabbing to inputs */
}

#frb-form .frb-step-1 {
    position: relative;
    margin-left: 0;
    visibility: visible;
}
</style>

<div class="frb-prevent-page-jump"></div>

<div class="frb frb-in-article" id="frb-main" style="display: none;"><!-- hidden by default until have checked the cookies -->

    <div class="frb-layout">

        <div class="frb-message">
            <div class="frb-message-inner">
                <svg class="frb-message-icon" role="img" aria-labelledby="frb-message-icon-title" width="25" height="25" viewBox="0 0 25 25" xmlns="http://www.w3.org/2000/svg"><title id="frb-message-icon-title">Info icon</title><g fill-rule="nonzero" fill="none"><circle fill="#900" cx="10.492" cy="14.492" r="10.492"/><path d="M12.681 11.754l-2.267 7.864c-.125.45-.188.745-.188.885 0 .08.033.156.1.226.066.07.136.105.21.105.125 0 .25-.055.376-.165.332-.273.73-.767 1.194-1.482l.376.22c-1.113 1.94-2.296 2.91-3.55 2.91-.48 0-.86-.135-1.144-.404a1.349 1.349 0 0 1-.426-1.023c0-.273.062-.62.188-1.04l1.537-5.286c.147-.51.221-.892.221-1.15a.566.566 0 0 0-.21-.432c-.14-.125-.332-.188-.575-.188-.11 0-.243.004-.398.011l.144-.442 3.749-.609h.663zm-.685-5.087c.457 0 .842.159 1.156.475.313.318.47.701.47 1.15 0 .45-.16.834-.476 1.15-.317.318-.7.476-1.15.476-.443 0-.822-.158-1.14-.475a1.566 1.566 0 0 1-.475-1.15c0-.45.157-.833.47-1.15a1.549 1.549 0 0 1 1.145-.476z" fill="#FFF"/></g></svg>
                <span class="frb-greeting">
                    {{{FR2015_translations,dsk-lg-greeting}}}
                </span>

               It's a little awkward, so we'll get straight to the point: This <span class="frb-replace-dayofweek"></span> we humbly ask you to defend Wikipedia's independence. We depend on donations averaging about %AVERAGE%, but 99% of our readers don't give. <span class="frb-highlight">If everyone reading this gave %MINIMUM%, we could keep Wikipedia thriving for years to come.</span> The price of your <span class="frb-replace-dayofweek"></span> coffee is all we need. When we made Wikipedia a non-profit, people warned us we'd regret it. But if Wikipedia became commercial, it would be a great loss to the world. Wikipedia is a place to learn, not a place for advertising. It unites all of us who love knowledge: contributors, readers and the donors who keep us thriving. The heart and soul of Wikipedia is a community of people working to bring you unlimited access to reliable, neutral information. Please take a minute to help us keep Wikipedia growing. Thank you.

            </div>
            <div class="frb-footer frb-smallprint">
                {{MediaWiki:FundraisingBanners/SmallPrint-2017}}
            </div>
        </div><!--frb-message-->
    </div><!--frb-layout-->
</div>

<script>
var frb = frb || {};

frb.show = function() {
    $('.frb-in-article').css('display', 'block');
};

frb.hide = function() {
    /* Hide the banner, and remove related event handlers */
    /* Don't set a cookie: this is a large banner and only shown on first view anyway */
    $('.frb').hide();
    $('.frb-prevent-page-jump').hide();
    $(window).off('.frb');
    $('#toc a').off('.frb');
};

/**
 * Show the given step
 * Literally just move into place and make it visible,
 * there may be other stuff needed to prepare it.
 *
 * @param  {string} step - name of step
 */
frb.showStep = function( step ) {

    var w = 320, // width in px
        d = 300  // animation duration in ms

    function moveLeft( $el ) {
        $el.animate({ 'margin-left': -w }, d, function() {
            $(this).css({ 'visibility': 'hidden' });
        })
    }

    function moveRight( $el ) {
        $el.animate({ 'margin-left': w }, d, function() {
            $(this).css({ 'visibility': 'hidden' });
        })
    }

    function moveVisible( $el ) {
        $el.css({ 'visibility': 'visible' }).animate({ 'margin-left': 0 }, d);
    }

    if ( step === '1' ) {
        moveVisible( $('.frb-step-1') );
          moveRight( $('.frb-step-optin, .frb-step-upsell, .frb-step-monthly-diff-amt') )
    } else if ( step === 'optin' ) {
           moveLeft( $('.frb-step-1') );
        moveVisible( $('.frb-step-optin') );
          moveRight( $('.frb-step-upsell, .frb-step-monthly-diff-amt') );
    } else if ( step === 'upsell' ) {
           moveLeft( $('.frb-step-1, .frb-step-optin') );
        moveVisible( $('.frb-step-upsell') );
          moveRight( $('.frb-step-monthly-diff-amt') );
    } else if ( step === 'monthly-diff-amt' ) {
           moveLeft( $('.frb-step-1, .frb-step-optin, .frb-step-upsell') );
        moveVisible( $('.frb-step-monthly-diff-amt') );
    } else {
        console.log( 'Invalid step: ' + step );
    }

};

frb.toggleMonthly = function( monthly ) {
    if( monthly.type === 'checkbox' ){
        monthly = monthly.checked;
    }
    if ( monthly ) {
        $('#frb-frequency-monthly').prop("checked", true);
        $('#frb-monthly-checkbox').prop("checked", true);
        $('#frb-form').addClass('form-monthly');
        $('.no-monthly input[type=radio]').attr('disabled', true);
        $('.no-monthly').prop('disabled', false);
        $('#frb-form').addClass('form-monthly');
        if( $( '.form-monthly .no-monthly input[type=radio]' ).is(':checked') ) {
            $('.form-monthly .no-monthly input[type=radio]').removeAttr('checked');
            frb.setMethod({});
        }
        $('.frb-cta-label-monthly').show();
    } else {
        $('#frb-frequency-onetime').prop("checked", true);
        $('#frb-monthly-checkbox').prop("checked", false);
        $('#frb-form').removeClass('form-monthly');
        $('.no-monthly input[type=radio]').attr('disabled', false);
        $('.frb-cta-label-monthly').hide();
    }
};

frb.rml = {

    post: function() {
        /* Create the iframe for the form and use it as the form's target */
        var frameName = 'remindFrame';
        var $form = $('#frb-rml-form');
        if ( $("iframe[name=" + frameName + "]").length === 0 ) {
            var $iframe = $('<iframe style="display: none;" name="' + frameName + '"></iframe>');
            $form.attr('target', $iframe.attr('name'));
            $form.after($iframe);
        }
        $form[0].submit();
    },

    getCurrentDate: function() {
        /* Get current date in correct format for Silverpop */
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth()+1; // January is 0!
        var yyyy = today.getFullYear();

        if( dd < 10 ) {
            dd = '0' + dd;
        }
        if( mm < 10 ) {
            mm = '0' + mm;
        }

        return mm+'/'+dd+'/'+yyyy;
    },

    init: function() {
        /* Prep the reminder form */

        var form = document.getElementById('frb-rml-form');

        form.rml_country.value    = mw.centralNotice.data.country;
        form.rml_language.value   = mw.centralNotice.data.uselang;
        form.rml_submitDate.value = frb.rml.getCurrentDate();
        form.rml_segment.value    = Math.floor((Math.random() * 100) + 1);

        $('.frb-rml-link').click(function() {
            $('.frb-rml-form').toggle();
            $('#frb-rml-email').focus();
            return false;
        });

        $('#frb-rml-submit').click(function() {
            if ( mw.util.validateEmail( form.Email.value ) ) {
                frb.rml.post();
                $('.frb-rml-form, .frb-rml-link').attr('style','display:none !important');
                $('.frb-rml-ty').show();
                window.setTimeout( function() {
                    frb.hide();
                }, 2500);
                mw.centralNotice.internal.hide.setHideWithCloseButtonCookies(); // Hide future banners for 7 days
                return false;
            } else {
                $('#frb-rml-email').addClass('frb-haserror').focus();
                $('.frb-error-invalidemail').show();
                return false;
            }
        });
    }

};

{{MediaWiki:FundraisingBanners/LocalizeData-2017.js}}
{{MediaWiki:FundraisingBanners/CoreJS-2018.js}}
{{MediaWiki:FundraisingBanners/LocalizeJS-2017.js}}

{{MediaWiki:FR2014/Resources/alterImpressionData.js}}


$(function() {
    var language = mw.centralNotice.data.uselang;
    var country  = mw.centralNotice.data.country;
    var currency = frb.getCurrency(country);
    var validAmount;
    var validMethod;
    var validOptin;
    var form = document.getElementById('frb-form');

    mw.loader.using(['mediawiki.util']).then(function() {
        frb.rml.init();
    });

    frb.initAmountOptions();
    frb.localizeAmountOptions( frb.amounts.options7, currency, country, language, true );
    frb.localizeErrors();

    frb.storedOptions = {};
    frb.extraData = {};

    frb.setMethod = function(options) {
        frb.storedOptions = options;
    };

    frb.updateUpsellAsk = function() {
        var amount, feeAmount, upsellAmount,
            list = frb.amounts.monthlySuggest[currency];

        /* TODO: how to remove this? It's here for choosing a different
        monthly amount. But means going back and changing on step 1 has no effect */
        if ( form.otherMonthlyAmount.value !== '' ) {
            upsellAmount = form.otherMonthlyAmount.value;
        } else {

            amount = frb.getAmount(form);
            feeAmount = frb.calculateFee(amount);
            if ( $('#frb-ptf-checkbox').prop('checked') ) {
                amount = amount + feeAmount;
            }

            for (var i = list.length - 1; i >= 0; i--) {
                if ( amount <= list[i][0] ) {
                    upsellAmount = list[i][1];
                }
            }

            form.otherMonthlyAmount.value = upsellAmount;
        }

        var upsellAmountFormatted = frb.formatCurrency(currency, upsellAmount, language);
        $('.frb-upsell-ask').text(upsellAmountFormatted);

    };

    $('.frb-amounts').on('input change', function(e) {
        var target = $(e.target);
        if ( target.attr('id') !== 'input_amount_other' ) {
            if ( frb.validateAmount() ) {
                validAmount = 1;
            } else {
                validAmount = 0;
            }
        }
        frb.updateFeeDisplay();
        frb.activateCTA();
    });

    $('.frb-methods').on('change', function() {
        $('.frb-methods').removeClass('frb-haserror');
        $('.frb-error-method').hide();
        $('.frb-optin').slideDown();
        validMethod = 1;
        frb.activateCTA();
    });

    // Opt-in interaction
    $('.frb-optin').on('change', function() {
        $('.frb-optin').removeClass('frb-haserror');
        $('.frb-error-optin').hide();
        if ( $('#frb-optin-no').is(':checked') ) {
            $('.frb-optin-prompt').removeClass('is-positive');
            $('.frb-optin-prompt').slideDown( frb.stepVisible );
        } else {
            $('.frb-optin-prompt').addClass('is-positive');
        }
        validOptin = 1;
        frb.activateCTA();
    });

    // Go to the next step of the form
    $('#frb-continue').on('click', function(e) {
        e.preventDefault();
        var status = {amount: false, method: false};

        // Validate amount
        if( frb.validateAmount() ){
            status.amount = true;
        } else {
            frb.extraData.validateError = 1;
        }

        // Validate method
        if ($('input[name="frb-methods"]:checked').length === 1) {
            status.method = true;
        } else {
            frb.extraData.validateError = 1;
            $('.frb-methods').addClass('frb-haserror');
            $('.frb-error-method').show();
        }

        if (status.amount === true && status.method === true) {

            frb.updateUpsellAsk();

            $('.frb-rml-link, .frb-rml').hide();

            if ( frb.optinRequired ) {
                frb.showStep('optin');
            } else if ( frb.upsellPossible() ) {
                frb.showStep('upsell');
            } else {
                frb.submitForm( frb.storedOptions );
            }

        }
    });

    /* -- Back buttons -- */
    $('.frb-step-optin .frb-back').on('click', function(e) {
        frb.showStep('1');
        return false;
    });

    $('.frb-step-upsell .frb-back').on('click', function(e) {
        if ( frb.optinRequired ) {
            frb.showStep('optin');
        } else {
            frb.showStep('1');
        }
        return false;
    });

    $('.frb-step-monthly-diff-amt .frb-back').on('click', function(e) {
        validAmount = 1;
        frb.activateCTA();
        frb.toggleMonthly(false);
        frb.showStep('upsell');
        return false;
    });

    // Donate monthly other amount
    $('.frb-monthly-diff-amt-link').on('click', function(e) {
        document.getElementById('frb-form').otherMonthlyAmount.value = '';
        validAmount = 0;
        frb.activateCTA();
        frb.toggleMonthly(true);
        frb.showStep('monthly-diff-amt');
        return false;
    });

    // Validate monthly other amount
    $('#frb-amt-monthly-other-input').on('input change', function(e) {
        if ( frb.validateMonthlyAmount() ) {
            validAmount = 1;
            frb.updateUpsellAsk();
        } else {
            validAmount = 0;
        }
        frb.activateCTA();
    });

    frb.getMonthlyAmount = function() {
        var amount = null;

        // Check the "monthly other" amount box
        if (form.otherMonthlyAmount.value !== '') {
            var otherMonthlyAmount = form.otherMonthlyAmount.value;
            otherMonthlyAmount = otherMonthlyAmount.replace(/[,.](\d)$/, ':$10');
            otherMonthlyAmount = otherMonthlyAmount.replace(/[,.](\d)(\d)$/, ':$1$2');
            otherMonthlyAmount = otherMonthlyAmount.replace(/[$£€¥,.]/g, '');
            otherMonthlyAmount = otherMonthlyAmount.replace(/:/, '.');
            amount = otherMonthlyAmount;
        }

        amount = parseFloat(amount);

        if ( isNaN(amount) ) {
            return 0;
        } else {
            var totalMonthlyAmountFormatted = frb.formatCurrency(currency, amount, language);
            $('.frb-monthly-total').text(totalMonthlyAmountFormatted);

            return amount;
        }
    };

    frb.validateMonthlyAmount = function() {
        var amount = frb.getMonthlyAmount();
        var currency  = frb.getCurrency( mw.centralNotice.data.country );
        var minAmount = frb.amounts.minimums[ currency ];

        if ( amount === null || isNaN(amount) || amount <= 0 || amount < minAmount ) {
            $('.frb-error-bigamount').hide();
            $('.frb-error-smallamount').show();
            return false;
        } else if ( amount > frb.maxUSD * minAmount ) {
            $('.frb-error-bigamount').show();
            return false;
        } else {
            $('.frb-error-smallamount, .frb-error-bigamount').hide();
            return true;
        }
    };

    frb.submitMonthly = function() {
        frb.extraData.monthlyUpsell = 1;
        frb.extraData.originalAmt = frb.getAmount().toString();
        
        frb.toggleMonthly(true);
        document.getElementById('input_amount_other').checked = true;
        document.getElementById('frb-ptf-checkbox').checked = false;
        form.otherAmount.value = form.otherMonthlyAmount.value;
        frb.submitForm(frb.storedOptions);
    }

    // Submit form
    $('#frb-monthly-donate-yes').on('click', function(e) {
        frb.submitMonthly();
        return false;
    });

    $('#frb-monthly-donate-no').on('click', function(e) {
        frb.submitForm(frb.storedOptions);
        return false;
    });

    $('#frb-donate-monthly-other').on('click', function (e) {
        if (frb.validateMonthlyAmount()) {
            frb.submitMonthly();
        }
        return false;
    });

    frb.upsellPossible = function() {
        // Only do monthly upsell if initial selection is one-time and payment method supports monthly
        if ( frb.getRecurring(document.getElementById('frb-form')) ) {
            return false;
        } else if ( !frb.shouldShowRecurring( frb.storedOptions, mw.centralNotice.data.country ) ) {
            return false;
        } else {
            return true;
        }
    }

    $('#frb-donate').on('click', function(e) {
        if ( frb.validateForm( frb.storedOptions) ) {
            if ( frb.upsellPossible() ) {
                frb.showStep('upsell');
            } else {
                frb.submitForm( frb.storedOptions );
            }
        }
        return false;
    });

    // Make sure form elements don't overflow if expanded
    frb.stepVisible = function(){
        var divHeight = $('.frb-step-optin').height();
        $('#frb-form').animate({'height': divHeight + 80},100);
    };

    /* End step functionality */

    // Focus for #input_amount_other
    $('.frb-amt-other').click(function() {
        document.getElementById('input_amount_other').checked = true;
        frb.updateFeeDisplay();
        $('#frb-amt-other-input').focus();
    });

    // Activate #input_amount_other radio when tabbing into #frb-amt-other-input
    $('#frb-amt-other-input').focus(function() {
        document.getElementById('input_amount_other').checked = true;
        frb.updateFeeDisplay();
    });

    frb.activateCTA = function(){
        if ( validAmount && validMethod ) {
            $('#frb-continue, #frb-monthly-donate-yes, #frb-monthly-donate-no, #frb-donate-monthly-other').addClass('active');
            if (validOptin) {
                $('#frb-donate').addClass('active');
            }
        } else {
            $('.frb-submit').removeClass('active');
        }
    };


    /* --- Nag/minimized banner functionality --- */

    // On Load
    var bannerOuterHeight = $('.frb-in-article').outerHeight( true );
    var stickyHeaderTop = bannerOuterHeight + $('.frb-in-article').offset().top + 200;

    frb.initNag = function() {

        // Intercept TOC clicks, and account for nag height
        $('#toc ul > li a').on('click.frb', function(e) {
            e.preventDefault();

            var anchor = $(this).attr('href').replace('#','');
            anchor = $("[id='"+anchor+"']");

            var offsetTop = anchor.offset().top - $('.frb-nag').outerHeight();
            $('body, html').animate({ scrollTop: offsetTop }, 10);
            window.location.hash = $(this).attr('href');
        });

        // Scroll to section, accounting for nag height
        if ( window.location.hash ) {
            var agent = navigator.userAgent;
            var offsetTop;
            var hash = decodeURI(window.location.hash).replace('#','');
            hash = $("[id='"+hash+"']");

            offsetTop = hash.offset().top + bannerOuterHeight - $('.frb-nag').outerHeight();
            $('body, html').animate( { scrollTop: offsetTop }, 100 );
        }

        $(window).on('resize.frb', function() {
            bannerOuterHeight = $('.frb-in-article').outerHeight( true );
            stickyHeaderTop = bannerOuterHeight + $('.frb-in-article').offset().top + 200;
        });

        function scrollFunction() {
            if( $(window).scrollTop() > stickyHeaderTop ) {
                if ( !frb.fixed ) {
                    $('.frb-nag').show();
                    $('.frb-rml').appendTo('.frb-nag .frb-form-wrapper');
                }
            } else {
                if ( frb.fixed ) {
                    $('.frb-prevent-page-jump')
                        .removeClass('frb-in-article')
                        .hide();
                    $('#frb-main')
                        .removeClass('frb-fixed')
                        .addClass('frb-in-article');
                    $('.frb-rml').appendTo('#frb-main .frb-form-wrapper');
                    frb.fixed = false;
                } else {
                    $('.frb-nag').hide();
                    $('.frb-rml').appendTo('#frb-main .frb-form-wrapper');
                }
            }
        }

        $(window).on('load.frb scroll.frb resize.frb', function() {
            scrollFunction();
        });

        frb.clickNag = function(e) {
            // Add spacer to prevent jump
            var inArticleHeight = $('#frb-main').outerHeight();
            $('.frb-prevent-page-jump')
                .height( inArticleHeight )
                .addClass('frb-in-article') // So that it can be used for stickyHeader calcs
                .show();

            $('#frb-main')
                .removeClass('frb-in-article')
                .addClass('frb-fixed');

            $('.frb-rml').appendTo('#frb-main .frb-form-wrapper')
            $('.frb-nag').hide();

            frb.fixed = true;
            frb.extraData.clickedNag = 1;
            return false;
        };

        $('.frb-nag').on( 'click', frb.clickNag );
        $('#nag-yes-btn').on( 'click', frb.clickNag );

        $('#nag-rml-btn').on( 'click', function(e) {
            $('.frb-nag').addClass('frb-rml-displayed');
            $('.frb-nag').off('click'); // Remove so they can interact with RML
        });

    };

    $('.close-rml').on('click', function(e) {
        $('.frb-nag').removeClass('frb-rml-displayed');
    });

    $('.frb-close').on('click', function (e) {
        frb.hide();
        return false;
    });

    /* Hide banner outside of main namespace (and Main Page, for sites where that isn't in main namespace) */
    if ( mw.config.get('wgNamespaceNumber') > 0 && !mw.config.get('wgIsMainPage') ) {
        mw.centralNotice.bannerData.hideResult = true;
        mw.centralNotice.bannerData.hideReason = 'namespace';
    }
    /* Hide banner on mobile site, in case wrong device settings were chosen */
    if ( mw.config.get('skin') === 'minerva' ) {
        mw.centralNotice.bannerData.hideResult = true;
        mw.centralNotice.bannerData.hideReason = 'other';
    }

    if (!mw.centralNotice.bannerData.hideResult) {
        frb.initNag();
        frb.show();
    }

});
</script>
